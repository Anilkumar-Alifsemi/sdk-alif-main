

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Serial Display &mdash; Zephyr Alif SDK Appnotes - v1.4</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />

  
    <link rel="shortcut icon" href="_static/favicon.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=0ed52906"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
      <script src="_static/js/custom.js"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="SE Tool Flashing for Alif DevKits" href="se_tool_flash.html" />
    <link rel="prev" title="Parallel Display" href="parallel_display.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980b9" >

          
          
          <a href="index.html">
            
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="clock_control.html">Clock Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="helloworld_ospi.html">Building Hello World for OSPI NOR Flash</a></li>
<li class="toctree-l1"><a class="reference internal" href="utimer_counter.html">UTimer Counter</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdmmc.html">SDMMC</a></li>
<li class="toctree-l1"><a class="reference internal" href="qdec.html">QDEC</a></li>
<li class="toctree-l1"><a class="reference internal" href="can.html">CAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="dac.html">DAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="ethos_u55.html">Ethos U-55 NPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="ethos_u85.html">Ethos-U85 NPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="lp_timer.html">Low Power Timer</a></li>
<li class="toctree-l1"><a class="reference internal" href="i2c.html">I2C</a></li>
<li class="toctree-l1"><a class="reference internal" href="lp_i2c.html">LPI2C</a></li>
<li class="toctree-l1"><a class="reference internal" href="i3c.html">I3C</a></li>
<li class="toctree-l1"><a class="reference internal" href="lp_rtc.html">LPRTC</a></li>
<li class="toctree-l1"><a class="reference internal" href="pwm.html">PWM</a></li>
<li class="toctree-l1"><a class="reference internal" href="touchscreen.html">GT911 Touchscreen</a></li>
<li class="toctree-l1"><a class="reference internal" href="uart.html">UART</a></li>
<li class="toctree-l1"><a class="reference internal" href="ble.html">BLE</a></li>
<li class="toctree-l1"><a class="reference internal" href="cmp_lpcmp.html">CMP/LPCMP</a></li>
<li class="toctree-l1"><a class="reference internal" href="lc3.html">LC3</a></li>
<li class="toctree-l1"><a class="reference internal" href="power_management.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="adc.html">ADC12/24</a></li>
<li class="toctree-l1"><a class="reference internal" href="crc.html">CRC</a></li>
<li class="toctree-l1"><a class="reference internal" href="dma.html">DMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="i2s.html">I2S</a></li>
<li class="toctree-l1"><a class="reference internal" href="spi.html">SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="pdm.html">PDM</a></li>
<li class="toctree-l1"><a class="reference internal" href="mipi_camera.html">MIPI Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel_camera.html">Parallel Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="ospi_flash.html">OSPI Flash</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel_display.html">Parallel Display</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Serial Display</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#required-software-drivers">Required Software Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cdc200-blending-pipeline">CDC200 Blending Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hardware-requirements">Hardware Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cdc200-controller">CDC200 Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="#focus-lcds-panel-specifications">Focus LCDs Panel Specifications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mipi-dsi">MIPI DSI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hardware-connection-setup">Hardware Connection &amp; Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-the-cdc200-application">Building the CDC200 Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#required-config-features">Required Config Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dts-properties">DTS Properties</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cdc200-dts-properties">CDC200 DTS Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mipi-dsi-dts-properties">MIPI-DSI DTS Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fw-405-panel-dts-properties">FW-405 Panel DTS Properties</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#validating-cdc200">Validating CDC200</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#output-logs">Output Logs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="se_tool_flash.html">SE Tool Flashing for Alif DevKits</a></li>
<li class="toctree-l1"><a class="reference internal" href="ensemble_pins.html">Pin Configuration for Ensemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="balletto_pins.html">Pin Configuration for Balletto</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980b9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Zephyr Alif SDK Application Notes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Serial Display</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/serial_display.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="serial-display">
<h1>Serial Display<a class="headerlink" href="#serial-display" title="Link to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>This application note describes how to flush continuous video frames to a serial display using the CDC200 device and an LCD panel. The ILI9806E panel is used for the demo application. The components in the display pipeline for Alif SoCs are:</p>
<ol class="arabic simple">
<li><p>CDC200 DPI-Display Controller</p></li>
<li><p>MIPI DSI Controller (with integrated DPLL/DPHY)</p></li>
<li><p>Display Panel</p></li>
</ol>
<figure class="align-center" id="id1">
<img alt="MIPI DSI Block Diagram" src="_images/mipi_dsi_block_diagram.png" />
<figcaption>
<p><span class="caption-number">Figure 90 </span><span class="caption-text">MIPI DSI Block Diagram</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The MIPI Display Serial Interface (DSI) facilitates communication and data transfer from a processor to a DSI-compliant display panel. The interface is based on a DSI host controller, which implements the protocol functions defined in the MIPI DSI specification, while a D-PHY module acts as the physical layer. The Configurable DPI controller (CDC200) within the processor generates a video stream for the DSI controller to use. The CDC200 IP reads images (layers) from memory, combines them on the fly (e.g., by blending, cropping, and windowing operations), and generates a video output stream of the combined image. The CDC200 has two output interfaces:</p>
<ol class="arabic simple">
<li><p>Parallel Display Interface contains VSync, HSync, Pixel clk, DE signals, and 24 bitsGND for RGB channels.</p></li>
<li><p>Serial Display Interface connects internally to the MIPI DSI controller IP module to convert the RGB signals.</p></li>
</ol>
<figure class="align-center" id="id2">
<img alt="MIPI DSI Flow Diagram" src="_images/mipi_dsi_flow_diagram.png" />
<figcaption>
<p><span class="caption-number">Figure 91 </span><span class="caption-text">MIPI DSI Flow Diagram</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The Display Panel can be either parallel or serial. The serial display panel connects to the MIPI DSI controller IP, which is in turn connected to the CDC200.</p>
<figure class="align-center" id="id3">
<img alt="DPI Internal Connection" src="_images/dpi_internal_connection.png" />
<figcaption>
<p><span class="caption-number">Figure 92 </span><span class="caption-text">DPI Internal Connection</span><a class="headerlink" href="#id3" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="required-software-drivers">
<h2>Required Software Drivers<a class="headerlink" href="#required-software-drivers" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>MIPI DSI controller driver</p></li>
<li><p>Display controller driver (CDC200)</p></li>
<li><p>Panel Driver (ILI9806E)</p></li>
</ul>
</section>
<section id="cdc200-blending-pipeline">
<h2>CDC200 Blending Pipeline<a class="headerlink" href="#cdc200-blending-pipeline" title="Link to this heading"></a></h2>
<p>The CDC200 has two layers and a background layer color that are different parameters that can be controlled in a display system.</p>
<figure class="align-center" id="id4">
<img alt="CDC200 Blending Pipeline" src="_images/cdc200_blending_pipeline.png" />
<figcaption>
<p><span class="caption-number">Figure 93 </span><span class="caption-text">CDC200 Blending Pipeline</span><a class="headerlink" href="#id4" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The CDC (Color Display Controller) includes blending logic that combines the color values (RGB) of one layer with the blended results of sub-adjacent layers. Here’s how it works:</p>
<ol class="arabic">
<li><p><strong>Blending Process</strong>
- To calculate a blended pixel, as many steps as there are layers are needed.
- Internally, this process is achieved through the Alpha Blending Pipeline (ABP).
- The ABP delivers one pixel per clock cycle.
- The length of the ABP corresponds to the number of blending steps required (i.e., the number of layers).</p></li>
<li><p><strong>Layer Blending Order</strong>
- If two layers are enabled:</p>
<blockquote>
<div><ul class="simple">
<li><p>First, layer 1 is blended with the background (BG) color.</p></li>
<li><p>Then, layer 2 is blended with the result of the blended color from layer 1 and the background.</p></li>
</ul>
</div></blockquote>
<div class="math notranslate nohighlight">
\[C' = f_1 \cdot c + f_2 \cdot c_s\]</div>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(C'\)</span> = blended color</p></li>
<li><p><span class="math notranslate nohighlight">\(f_1\)</span> = blend factor for current layer pixels</p></li>
<li><p><span class="math notranslate nohighlight">\(c\)</span> = current layer color</p></li>
<li><p><span class="math notranslate nohighlight">\(f_2\)</span> = blend factor for sub-adjacent color</p></li>
<li><p><span class="math notranslate nohighlight">\(c_s\)</span> = sub-adjacent layer color</p></li>
</ul>
<table class="docutils align-default" id="id5">
<caption><span class="caption-number">Table 10 </span><span class="caption-text">Possible Values of <span class="math notranslate nohighlight">\(f_1\)</span></span><a class="headerlink" href="#id5" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 28.6%" />
<col style="width: 71.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Significance</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>4</p></td>
<td><p>Constant-<span class="math notranslate nohighlight">\(\alpha\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Pixel-<span class="math notranslate nohighlight">\(\alpha\)</span> * Constant-<span class="math notranslate nohighlight">\(\alpha\)</span></p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id6">
<caption><span class="caption-number">Table 11 </span><span class="caption-text">Possible Values of <span class="math notranslate nohighlight">\(f_2\)</span></span><a class="headerlink" href="#id6" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 28.6%" />
<col style="width: 71.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Significance</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>5</p></td>
<td><p>1 - Constant-<span class="math notranslate nohighlight">\(\alpha\)</span></p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>1 - (Pixel-<span class="math notranslate nohighlight">\(\alpha\)</span> * Constant-<span class="math notranslate nohighlight">\(\alpha\)</span>)</p></td>
</tr>
</tbody>
</table>
<p>Constant-<span class="math notranslate nohighlight">\(\alpha\)</span> for each layer can be configured using the <code class="docutils literal notranslate"><span class="pre">CDC_Ln_CONST_ALPHA</span></code> register or the <code class="docutils literal notranslate"><span class="pre">const-alpha-l1/2</span></code> parameter in the driver. The pixel alpha (Pixel-<span class="math notranslate nohighlight">\(\alpha\)</span>) is determined by the pixel format used for the layer. In ARGB formats, there is a per-pixel alpha value provided, whereas in non-ARGB formats, the per-pixel values are elaborated to ARGB values, with an:math:<cite>alpha</cite> value of 0 per pixel.</p>
<p>Alpha (<span class="math notranslate nohighlight">\(\alpha\)</span>) represents the opacity of a layer. The alpha value for a layer can range from 0 to 255 (0xff). For example, in the blending scenario described above:</p>
<ol class="arabic simple">
<li><p>Consider the following settings:
- Global background color (bg-color): 0x00ff00 (Green)
- Layer 2: Disabled
- Layer 1: Disabled
- Default layer color for layer 1 (def-layer-color): 0xffff0000 (Red)
- Blending factors for layer 1 (f1, f2): (4, 5)
- Blending factors for layer 2 (f1, f2): (6, 7)</p></li>
<li><p>If the constant alpha (const(<span class="math notranslate nohighlight">\(\alpha\)</span>) for layer 1 is set to 0xff (255), only the color from the current layer will be used during blending. Any alpha value associated with the pixel will be ignored. In this case, the resulting color will be 0xffff0000 (Red).</p></li>
<li><p>Similarly, if the constant alpha for the background layer (const-<span class="math notranslate nohighlight">\(\alpha\)</span>) is set to 0xff (255), only the color from the background layer will be used during blending. The resulting color will be 0x00ff00 (Green).</p></li>
</ol>
</li>
</ol>
<figure class="align-center" id="id7">
<img alt="CDC200 Blending Process" src="_images/blending_process.png" />
<figcaption>
<p><span class="caption-number">Figure 94 </span><span class="caption-text">CDC200 Blending Process</span><a class="headerlink" href="#id7" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="hardware-requirements">
<h2>Hardware Requirements<a class="headerlink" href="#hardware-requirements" title="Link to this heading"></a></h2>
<section id="cdc200-controller">
<h3>CDC200 Controller<a class="headerlink" href="#cdc200-controller" title="Link to this heading"></a></h3>
<p>The Customizable Display Controller (CDC) from TES is a fully configurable VHDL IP to drive pixel displays. It supports the following main features:</p>
<ul class="simple">
<li><p>Configurable resolution and refresh rate</p></li>
<li><p>2 display layers</p></li>
<li><p>Programmable background color</p></li>
<li><p>Color Look-up Table (CLUT) with 256 x 24 entries per layer for indexed pixel formats</p></li>
<li><p>Flexible blending between the layers using alpha value (const alpha or Pixel alpha)</p></li>
<li><p>Color Keying: defining transparent color for pixel formats without alpha channel</p></li>
<li><p>Windowing: blending a programmable rectangular area of one layer into the other</p></li>
<li><p>Default Color Programmable: per layer default color that is to be used in case of windowing or disabled layer</p></li>
<li><p>Gamma Correction: map incoming RGB to different RGB values</p></li>
<li><p>Dithering (2 bits per color Component): providing softer color transitions for displays with less color depth</p></li>
<li><p>Multiple input pixel formats selectable per layer:
- ARGB8888, RGBA8888, RGB888, RGB565, ARGB1555, ARGB4444
- AL44, L8</p></li>
<li><p>RGB888 output pixel format</p></li>
</ul>
</section>
<section id="focus-lcds-panel-specifications">
<h3>Focus LCDs Panel Specifications<a class="headerlink" href="#focus-lcds-panel-specifications" title="Link to this heading"></a></h3>
<p>Two example displays have been brought up on Alif Development Kit hardware. There is a 5” non-touch panel and a 4.3” capacitive touch panel included with the development kit depending on availability. They share the ILI9806E TFT controller, for which a driver is provided. To support additional displays using this same controller, simply change the resolution, timing values, and register sequence in the driver example.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For serial display: 2-lane display ILI9806E support is available only on the Alif Ensemble E7 DevKit.</p>
</div>
<table class="docutils align-default" id="id8">
<caption><span class="caption-number">Table 12 </span><span class="caption-text">Key Features</span><a class="headerlink" href="#id8" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 33.3%" />
<col style="width: 33.3%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key Features</p></th>
<th class="head"><p>E50RA-I-MW550-N</p></th>
<th class="head"><p>E43GB-I-MW405-C</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Diagonal Size</p></td>
<td><p>5.0” (127 mm)</p></td>
<td><p>4.3” (109 mm)</p></td>
</tr>
<tr class="row-odd"><td><p>Display Resolution</p></td>
<td><p>480x854</p></td>
<td><p>480x800</p></td>
</tr>
<tr class="row-even"><td><p>Display Colors</p></td>
<td><p>24-bit RGB</p></td>
<td><p>24-bit RGB</p></td>
</tr>
<tr class="row-odd"><td><p>Display Brightness</p></td>
<td><p>550 nits</p></td>
<td><p>405 nits</p></td>
</tr>
<tr class="row-even"><td><p>Display Controller</p></td>
<td><p>ILI9806E</p></td>
<td><p>ILI9806E</p></td>
</tr>
<tr class="row-odd"><td><p>Display Interface</p></td>
<td><p>2-lane DSI</p></td>
<td><p>2-lane DSI</p></td>
</tr>
<tr class="row-even"><td><p>Touch Controller</p></td>
<td><p>N/A</p></td>
<td><p>GT911</p></td>
</tr>
<tr class="row-odd"><td><p>Touch Interface</p></td>
<td><p>N/A</p></td>
<td><p>I2C</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default" id="id9">
<caption><span class="caption-number">Table 13 </span><span class="caption-text">Timing Specifications</span><a class="headerlink" href="#id9" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 33.3%" />
<col style="width: 33.3%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>E50RA-I-MW550-N</p></th>
<th class="head"><p>E43GB-I-MW405-C</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FPS</p></td>
<td><p>60</p></td>
<td><p>60</p></td>
</tr>
<tr class="row-odd"><td><p>Width</p></td>
<td><p>480</p></td>
<td><p>480</p></td>
</tr>
<tr class="row-even"><td><p>Height</p></td>
<td><p>854</p></td>
<td><p>800</p></td>
</tr>
<tr class="row-odd"><td><p>HSYNC</p></td>
<td><p>4</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>HBP</p></td>
<td><p>30</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>HFP</p></td>
<td><p>18</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-even"><td><p>VSYNC</p></td>
<td><p>4</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>VBP</p></td>
<td><p>30</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>VFP</p></td>
<td><p>20</p></td>
<td><p>10</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="mipi-dsi">
<h2>MIPI DSI<a class="headerlink" href="#mipi-dsi" title="Link to this heading"></a></h2>
<p>The MIPI Display Serial Interface (DSI) supports the following features:</p>
<ul>
<li><p>Supports one data lane (maximum speed 850 Mbps) or two data lanes (maximum speed 500 Mbps)</p></li>
<li><p>Supports DSI version 1.02.00</p></li>
<li><p>Supports D-PHY version 1.00.00</p></li>
<li><p>Supports DCS version 1.02.00</p></li>
<li><p>MIPI-DPI (Display Pixel Interface) interface:
- 16 bit/pixel (R: 5-bit, G: 6-bit, B: 5-bit)
- 18 bit/pixel (R: 6-bit, G: 6-bit, B: 6-bit)
- 24 bit/pixel (R: 8-bit, G: 8-bit, B: 8-bit)</p></li>
<li><p>3-line 9-bit SPI (Serial Peripheral Interface) interface for touch sensor</p></li>
<li><p>2 TX data lanes on D-PHY</p></li>
<li><p>Up to 2.5 Gbps per lane in D-PHY</p></li>
<li><p>Supports ULPS (Ultra Low Power State) with PLL disabled</p></li>
<li><p>Bi-directional communication and escape mode support through Data Lane 0</p></li>
<li><p>ECC and Checksum capabilities</p></li>
<li><p>Supports End of Transmission Packet (EoTp)</p></li>
<li><p>Fault recovery schemes</p></li>
<li><p>DPI interface features:
- DPI interface color coding mappings into 30-bit interface:</p>
<blockquote>
<div><ul class="simple">
<li><p>16-bit RGB, configuration 2</p></li>
<li><p>18-bit RGB, configuration 2</p></li>
<li><p>24-bit RGB</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Programmable polarity for all DPI interface signals</p></li>
</ul>
</li>
<li><p>Video Mode Pattern Generator with the following capabilities:
- Vertical/Horizontal color bar generation without DPI stimuli
- PHY Bit-Error Rate (BER) pattern without DPI stimuli</p></li>
</ul>
</section>
<section id="hardware-connection-setup">
<h2>Hardware Connection &amp; Setup<a class="headerlink" href="#hardware-connection-setup" title="Link to this heading"></a></h2>
<p>The Alif DevKit connects to the ILI9806E panel via the MIPI DSI interface. The MIPI DSI controller on the DevKit Board interfaces with the ILI9806E panel using differential signaling pairs (D0P/N, D1P/N, CLKP/N) for high-speed data transmission. No external jumper wires are required, as the connections are internal to the board’s MIPI DSI connector.</p>
<figure class="align-center" id="id10">
<img alt="ILI9806E Panel" src="_images/ILI9806E.png" />
<figcaption>
<p><span class="caption-number">Figure 95 </span><span class="caption-text">ILI9806E Panel</span><a class="headerlink" href="#id10" title="Link to this image"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id11">
<img alt="Hardware Setup" src="_images/serial_display_setup.png" />
<figcaption>
<p><span class="caption-number">Figure 96 </span><span class="caption-text">Hardware Setup</span><a class="headerlink" href="#id11" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="building-the-cdc200-application">
<h2>Building the CDC200 Application<a class="headerlink" href="#building-the-cdc200-application" title="Link to this heading"></a></h2>
<p>The application was tested for the HP core. Follow these steps to build your Zephyr-based CDC200 application using the GCC compiler and the Alif Zephyr SDK:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The application is designed for the Alif Ensemble E7 DevKit. Modify the sample code as needed for other DevKits.</p>
</div>
<ol class="arabic">
<li><p>For instructions on fetching the Alif Zephyr SDK, please refer to the <a class="reference external" href="https://github.com/alifsemi/sdk-alif/releases/download/v1.4.0/user_guide.pdf">ZAS User Guide</a></p></li>
<li><p>Remove the existing build directory and build the CDC200 application for TCM memory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm<span class="w"> </span>-rf<span class="w"> </span>build
west<span class="w"> </span>build<span class="w"> </span>-b<span class="w"> </span>alif_e1c_dk_rtss_he<span class="w"> </span>../alif/samples/drivers/display/<span class="w"> </span>--<span class="w"> </span>-G<span class="s2">&quot;Unix Makefiles&quot;</span><span class="w"> </span>-DOVERLAY_CONFIG<span class="o">=</span><span class="nv">$PWD</span>/../alif/samples/drivers/display/boards/serial_display.conf<span class="w"> </span>-DDTC_OVERLAY_FILE<span class="o">=</span><span class="s2">&quot;/home/</span><span class="nv">$USER</span><span class="s2">/zas-1.3/zephyr/../alif/samples/drivers/display/boards/serial_display_2lane.overlay&quot;</span>
</pre></div>
</div>
</li>
<li><p>To verify the application with OSPI memory, use the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rm<span class="w"> </span>-rf<span class="w"> </span>build
west<span class="w"> </span>build<span class="w"> </span>-b<span class="w"> </span>alif_e1c_dk_rtss_he<span class="w"> </span>../alif/samples/drivers/display/<span class="w"> </span>--<span class="w"> </span>-G<span class="s2">&quot;Unix Makefiles&quot;</span><span class="w"> </span>-DOVERLAY_CONFIG<span class="o">=</span><span class="nv">$PWD</span>/../alif/samples/drivers/display/boards/serial_display.conf<span class="w"> </span>-DDTC_OVERLAY_FILE<span class="o">=</span><span class="s2">&quot;/home/</span><span class="nv">$USER</span><span class="s2">/zas-1.3/zephyr/../alif/samples/drivers/display/boards/serial_display_2lane.overlay&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since the serial display driver has its own overlay file, include its path along with the OSPI overlay file path.</p>
</div>
</li>
<li><p>Access the output and binary files: The binary file is available in the <code class="docutils literal notranslate"><span class="pre">./build/zephyr/</span></code> directory.</p></li>
</ol>
</section>
<section id="required-config-features">
<h2>Required Config Features<a class="headerlink" href="#required-config-features" title="Link to this heading"></a></h2>
<p>The following config features are necessary to test the application:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_HEAP_MEM_POOL_SIZE=81920</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_LOG=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_DISPLAY=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_MIPI_DSI=y</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CONFIG_DISPLAY_LOG_LEVEL_DBG=y</span></code> (to enable display driver debug logs)</p></li>
</ul>
<p>These config features are already selected when building the test application.</p>
</section>
<section id="dts-properties">
<h2>DTS Properties<a class="headerlink" href="#dts-properties" title="Link to this heading"></a></h2>
<section id="cdc200-dts-properties">
<h3>CDC200 DTS Properties<a class="headerlink" href="#cdc200-dts-properties" title="Link to this heading"></a></h3>
<p>The DTS entry for the CDC200 in Zephyr has the following tweakable properties that allow testing various features:</p>
<table class="docutils align-default" id="id12">
<caption><span class="caption-number">Table 14 </span><span class="caption-text">CDC200 DTS Properties</span><a class="headerlink" href="#id12" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 22.2%" />
<col style="width: 55.6%" />
<col style="width: 22.2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>DTS Property</p></th>
<th class="head"><p>Significance</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>width</p></td>
<td><p>Width of Panel in pixels (for FW-405 panel)</p></td>
<td><p>480</p></td>
</tr>
<tr class="row-odd"><td><p>height</p></td>
<td><p>Height of Panel in pixels (for FW-405 panel)</p></td>
<td><p>800</p></td>
</tr>
<tr class="row-even"><td><p>hfront-porch</p></td>
<td><p>Horizontal Front Porch time in pixel clocks (for FW-405 panel)</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>hback-porch</p></td>
<td><p>Horizontal Back Porch time in pixel clocks (for FW-405 panel)</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-even"><td><p>hsync-len</p></td>
<td><p>Length of horizontal sync pulse in pixel clock (for FW-405 panel)</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-odd"><td><p>vfront-porch</p></td>
<td><p>Vertical Front Porch time in pixel clocks (for FW-405 panel)</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-even"><td><p>vback-porch</p></td>
<td><p>Vertical Back Porch time in pixel clocks (for FW-405 panel)</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p>vsync-len</p></td>
<td><p>Length of vertical sync pulse in number of lines (for FW-405 panel)</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>hsync-active</p></td>
<td><p>Polarity of H-Sync Pulse. 0 - Active low, 1 - Active high</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>vsync-active</p></td>
<td><p>Polarity of V-Sync Pulse. 0 - Active low, 1 - Active high</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>de-active</p></td>
<td><p>Polarity of Data Enable (DE) signal. 0 - Active low, 1 - Active high</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>pixelclk-active</p></td>
<td><p>Polarity of H-Sync Pulse. 0 - Active low, 1 - Active high</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>bg-color</p></td>
<td><p>Background Layer color (24-bit in size)</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>enable-l1/l2</p></td>
<td><p>Enable Layer 1/2. 0 - Disable, 1 - Enable</p></td>
<td><p>1 - l1, 0 - l2</p></td>
</tr>
<tr class="row-even"><td><p>pixel-fmt-l1/l2</p></td>
<td><p>Pixel format for Layer 1/2. Possible values: “argb-8888” (Tested + supported by app), “rgb-888”, “rgb-565” (Tested + supported by app), “rgba-8888”, “al-44”, “l-8”, “argb-1555”, “argb-4444”</p></td>
<td><p>“rgb-888” - l1, “undefined” - l2</p></td>
</tr>
<tr class="row-odd"><td><p>def-back-color-l1/l2</p></td>
<td><p>Default Color for layer 1/2 (32-bit value)</p></td>
<td><p>0 - l1, No value specified for l2</p></td>
</tr>
<tr class="row-even"><td><p>win-x0-l1/l2</p></td>
<td><p>Starting x value for layer 1/2. Its value should be between 0 to width (inclusive), but less than win-x1-l1/l2 respectively</p></td>
<td><p>0 - l1, 0 - l2</p></td>
</tr>
<tr class="row-odd"><td><p>win-x1-l1/l2</p></td>
<td><p>Ending x value for layer 1/2. Its value should be between 0 to width (inclusive), but greater than win-x0-l1/l2 respectively</p></td>
<td><p>480 - l1, 0 - l2</p></td>
</tr>
<tr class="row-even"><td><p>win-y0-l1/l2</p></td>
<td><p>Starting y value of layer 1/2. Its value should be between 0 to height (inclusive), but less than win-y1-l1/l2 respectively</p></td>
<td><p>0 - l1 and l2</p></td>
</tr>
<tr class="row-odd"><td><p>win-y1-l1/l2</p></td>
<td><p>Ending value of layer 1/2. Its value should be between 0 to height (inclusive), but greater than win-y0-l1/l2 respectively</p></td>
<td><p>800 - l1, 0 - l2</p></td>
</tr>
<tr class="row-even"><td><p>blend-factor1-l1/l2</p></td>
<td><p>Current layer blending factor - f1. When layer-wise blending is enabled, the pixel from current layer will be weighted based on this factor. Possible values: 4 - constant alpha used for weighting, if Pixel has alpha - it is ignored; 6 - (constant alpha * pixel alpha) used for weighing</p></td>
<td><p>4 - l1, 6 - l2</p></td>
</tr>
<tr class="row-odd"><td><p>blend-factor2-l1/l2</p></td>
<td><p>Subjacent layer blending factor - f2. When layer-wise blending is enabled, this factor will determine how the cumulative pixels from lower layers are to be blended. Possible values: 5 - (1 - constant alpha) used for weight; 7 - (1 - (pixel_alpha * constant_alpha)) used for weight</p></td>
<td><p>5 - l1, 7 - l2</p></td>
</tr>
<tr class="row-even"><td><p>const-alpha-l1/l2</p></td>
<td><p>Value of constant alpha to be used for a given layer</p></td>
<td><p>0xff - l1, 0xff - l2</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mipi-dsi-dts-properties">
<h3>MIPI-DSI DTS Properties<a class="headerlink" href="#mipi-dsi-dts-properties" title="Link to this heading"></a></h3>
<p>The DTS entry for MIPI-DSI has the following tweakable properties:</p>
<table class="docutils align-default" id="id13">
<caption><span class="caption-number">Table 15 </span><span class="caption-text">MIPI-DSI DTS Properties</span><a class="headerlink" href="#id13" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 40.0%" />
<col style="width: 20.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>DTS Property</p></th>
<th class="head"><p>Significance</p></th>
<th class="head"><p>Default Value</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>eotp-lp-tx-en</p></td>
<td><p>Automatically insert the EoTp short packet at the end of LP transmission from the host to peripheral</p></td>
<td><p>False</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>eotp-rx-en</p></td>
<td><p>Enable reception of the EoTp short packet at the end of LPDT reception from the peripheral</p></td>
<td><p>False</p></td>
<td><p>FW-405 does not support transmission of EoTp short packets</p></td>
</tr>
<tr class="row-even"><td><p>ecc-recv-en</p></td>
<td><p>Support for ECC reception, error correction, and reporting</p></td>
<td><p>True</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>crc-recv-en</p></td>
<td><p>Support for CRC reception and error reporting</p></td>
<td><p>True</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>frame-ack-en</p></td>
<td><p>Support Peripheral ACK at the end of frame</p></td>
<td><p>True</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>dpi-colorm-active</p></td>
<td><p>Polarity of ColorM pin. 0 - Active low, 1 - Active high</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>dpi-shutdn-active</p></td>
<td><p>Polarity of Shut-down pin. 0 - Active low, 1 - Active high</p></td>
<td><p>1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>vid-pkt-size</p></td>
<td><p>Size of video packet in pixel stream</p></td>
<td><p>480</p></td>
<td><p>Only useful in non-burst mode of operation</p></td>
</tr>
<tr class="row-even"><td><p>dpi-video-pattern-gen</p></td>
<td><p>Use DSI internal Video packet generator for driving display. CDC200 output will be overlooked when this property is used. Different modes available: vertical-color-bar, horizontal-color-bar, vertical-bit-error-rate</p></td>
<td><p>No value provided</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="fw-405-panel-dts-properties">
<h3>FW-405 Panel DTS Properties<a class="headerlink" href="#fw-405-panel-dts-properties" title="Link to this heading"></a></h3>
<p>The DTS entry for the FW-405 serial panel has the following tweakable properties:</p>
<table class="docutils align-default" id="id14">
<caption><span class="caption-number">Table 16 </span><span class="caption-text">FW-405 Panel DTS Properties</span><a class="headerlink" href="#id14" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 22.2%" />
<col style="width: 55.6%" />
<col style="width: 22.2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>DTS Property</p></th>
<th class="head"><p>Significance</p></th>
<th class="head"><p>Default Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>video-mode</p></td>
<td><p>Selects the mode of operation of Panel and Host DSI controller. Supported Modes: burst, nb-sync-pulse (Non-Burst with sync pulses), nb-sync-events (Non-Burst with sync events)</p></td>
<td><p>burst</p></td>
</tr>
<tr class="row-odd"><td><p>command-tx-mode</p></td>
<td><p>DSI Commands to be transmitted to the panel in either of the following modes: low-power, high-speed</p></td>
<td><p>high-speed</p></td>
</tr>
<tr class="row-even"><td><p>data-lanes</p></td>
<td><p>Number of data-lanes. For now, only 2 lanes are supported, but possible values are 1 and 2</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>pixel-format</p></td>
<td><p>Supported Pixel format for the DSI interface. MIPI_DSI_PIXFMT_RGB888, MIPI_DSI_PIXFMT_RGB666, MIPI_DSI_PIXFMT_RGB666_PACKED, MIPI_DSI_PIXFMT_RGB565</p></td>
<td><p>MIPI_DSI_PIXFMT_RGB888</p></td>
</tr>
<tr class="row-even"><td><p>width</p></td>
<td><p>Width of Panel. This should be same as width property of CDC200</p></td>
<td><p>480</p></td>
</tr>
<tr class="row-odd"><td><p>height</p></td>
<td><p>Height of Panel. This should be same as height property of CDC200</p></td>
<td><p>800</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="validating-cdc200">
<h2>Validating CDC200<a class="headerlink" href="#validating-cdc200" title="Link to this heading"></a></h2>
<p>The output screen is configured with the following layer settings:</p>
<ul class="simple">
<li><p>Panel dimensions (width, height) = (480, 800)</p></li>
<li><p>Layer 1 dimensions (x resolution, y resolution) = (480, 800)</p></li>
<li><p>Pixel where Layer 1 starts (x, y) = (0, 0)</p></li>
<li><p>Pixel where Layer 1 ends (x, y) = (480, 800)</p></li>
<li><p>Layer 2 dimensions (x resolution, y resolution) = (0, 0)</p></li>
<li><p>Pixel where Layer 2 starts (x, y) = (0, 0)</p></li>
<li><p>Pixel where Layer 2 ends (x, y) = (0, 0)</p></li>
</ul>
<section id="output-logs">
<h3>Output Logs<a class="headerlink" href="#output-logs" title="Link to this heading"></a></h3>
<p>The following are the output logs observed on minicom:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[00:00:00.244,000] &lt;inf&gt; panel_mw405: MW-405 Configuration.</span>
<span class="go">*** Booting Zephyr OS build 94f6e05fad28 ***</span>
<span class="go">[00:00:00.326,000] &lt;inf&gt; disp: Rotating the display by 180 degrees</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp: Enable Ensemble-DSI Device video mode.</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp: Panel Orientation - 2</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp: Display sample for cdc200@49031000</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp: Enabling CDC200 Device.</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp: Display Capabilities</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp: Panel resolution, supported formats - (480, 800), 25</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp: CDC200 orientation - 0</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp: Display Capabilities layer 1:</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp:  layer_enabled - 1</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp:  (x_res, y_res) - (480, 800)</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp:  curr_pix_fmt - 1</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp: Display Capabilities layer 2:</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp:  layer_enabled - 0</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp:  (x_res, y_res) - (0, 0)</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp:  curr_pix_fmt - 0</span>
<span class="go">[00:00:00.327,000] &lt;inf&gt; disp: FB0 - 0x02000000, size - 1152000</span>
</pre></div>
</div>
<figure class="align-center" id="id15">
<img alt="Serial Display Output" src="_images/serial_display_output.png" />
<figcaption>
<p><span class="caption-number">Figure 97 </span><span class="caption-text">Serial Display Output</span><a class="headerlink" href="#id15" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="known-issues">
<h2>Known Issues<a class="headerlink" href="#known-issues" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>Zephyr CDC200 Driver</strong>: The Zephyr device driver for the CDC200 currently supports only ARGB8888, RGB888, and RGB565 formats. This is a limitation of the Zephyr framework and may be addressed in future releases.</p></li>
<li><p><strong>Demo Application (Layer 2)</strong>: In the demo application, Layer 2 is designed to copy an image in ARGB8888 format directly from a C array to the framebuffer. Therefore, avoid using any format other than ARGB8888 for Layer 2. Layer 1 formats can be changed without issue.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024-2025, Alif Semiconductor.
      <span class="lastupdated">Last updated on Sep 12, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>